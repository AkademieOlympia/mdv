<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="style.css">
</head>
<body>

<h1>Model-driven Views: Motivation</h1>

<h2>Separating Structure From Content</h2>

<p>The overwhelming pattern on the web is that sets of pages want to look largely the same, but contain different data. As a result, page authors want to express that a page should:</p>

<pre>look <em>basically</em> like this, but insert these bits of data <em>here</em>, and <em>there</em>, and make <em>one of these sections here</em> for each item of <em>this data collection</em>, and only show <em>this</em> if <em>that</em> is true. <em>...and so on....</em></pre>

<p>The Basic Problem:</p>

<ul>
  <li>HTML lacks a sufficient mechanism for separating content from display.</p>
</ul>

<p>Further, as web pages evolve into web applications, it is clear that the existing mechanism for altering and creating HTML within the browser is poorly suited to the task:</p>

<ul>
  <li>The DOM API isn't appropriate for direct use by page authors.
    <ul>
      <li>It's too low-level an abstraction.</li>
      <li>It requires javascript. The set of people who can program is dramatically smaller than the set of people who can author HTML.</li>
      <li>The structure of the resulting page gets lost in the code, which makes it hard for the author to say what she meant.</li>
    </ul>
</ul>

<p>A huge variety of templating (and a handful of databinding) systems currently fill theses deficiencies on the web.</p>

<h2>Problems With Existing Approaches</h2>

<h3>On The Server</h3>

<ul>
  <li>Templates generally aren't HTML
    <ul>
      <li>Hard to validate.</li>
      <li>Non-standard templating syntax interacts badly with authoring tools.</li>
    </ul>
  </li>
  <li>Redundancy of bytes written to the wire
    <ul>
      <li>Can't deliver template once and unique data when needed.</li>
    </ul>
  </li>
</ul>

<h3>On The Client</h3>

<ul>
  <li>DOM APIs have historical been <a href="http://www.quirksmode.org/dom/innerhtml.html">slow</a>. This is becoming less true, but the belief is still widely held.</li>
  <li>Many libraries knowingly or naively rely on innerHTML which tends to
    <ul>
      <li>Create XSS attack surfaces.</li>
      <li>Rely on brittle string manipulations.</li>
      <li>Be <a href="#domStability">unstable</a> with respect to existing DOM structures.</li>
    </ul>
  </li>
  <li>Pages and templating libraries can inadvertently trigger layout too often at a large performance cost.</li>
  <li>Templates must be <em>hidden</em> from the browser.
    <ul>
      <li>Typically in text areas, script tags, comments, etc...</li>
      <li>Even for DOM-based approaches, style="display: none" doesn't make the template inactive. E.g. scripts run, selectors match, etc...</li>
      <li>Complicates development because debugging tools don't know about them.</li.>
    </ul>
  </li>
  <li>Even with good libraries, applications still require significant code to shuttle application data into and out of the DOM.</li>
</ul>

<h3 id="domStability">DOM Stability</h3>

<p>Web applications increasingly hold important transient state in DOM structures. This can include: </p>

<ul>
  <li>Attached event handlers</li>
  <li>Uncommitted user input to form fields</li>
  <li>Widget display state, encoded as DOM property values</li>
</ul>

<p>If application data is updated and needs to be reflected in a section of the DOM that contains important transient state, it is unacceptable to destroy that state.</p>

<ul>
  <li>Existing approaches typically can't or don't maintain DOM stability. Developers don't know that they need it until they hit the problem.</li>
</ul>

<h2>The Need for a Standard</h2>

<p>Even if various tactical improvements to HTML and the DOM APIs can be made such that Javascript libraries could improve, without support in HTML, the following are unlikely.</p>

<ul>
  <li>Good tool support (authoring, development, validation, debugging, etc...)</li>
  <li>Speed Improvements
    <ul>
      <li>Browser don't understand what's going on, so they can't optimize</li>
      <li>Network latency isn't going away. JS library cache hit rate is low and unlikely to improve given the diversity.</li>
      <li>Caching of templates.</li>
    </ul>
  </li>
  <li>Robots (e.g. search indexes) improve understanding/efficiency.</li>
</ul>

</body>
</html>

<!-- <p>This is important: Templates are poorly understood by the web. They allow the page author to say roughly what she meant, but only the templating library in use understands. Browsers, search engines, authoring tools, analytics (and so on) don't.</p>

-->
